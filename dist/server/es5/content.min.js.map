{"version":3,"file":"content.min.js","sources":["content.min.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n/* global __context Java Packages */\nvar JsonArray = Java.type('com.google.gson.JsonArray');\nvar JsonObject = Java.type('com.google.gson.JsonObject');\nvar JsonNull = Java.type('com.google.gson.JsonNull');\n\nfunction toJsonArray(value) {\n  var jsonArray = new JsonArray();\n\n  for (var index = 0, length = value.length; index < length; index++) {\n    var item = value[index];\n\n    if (_typeof(item) === 'object') {\n      jsonArray.add(toJsonElement(item));\n    } else {\n      jsonArray.add(item);\n    }\n  }\n\n  return jsonArray;\n}\n\nfunction toJsonObject(value) {\n  var jsonObject = new JsonObject();\n\n  for (var key in value) {\n    if (!Object.prototype.hasOwnProperty.call(value, key)) {\n      continue;\n    }\n\n    var item = value[key];\n\n    if (_typeof(item) === 'object') {\n      jsonObject.add(key, toJsonElement(item));\n    } else {\n      jsonObject.addProperty(key, item);\n    }\n  }\n\n  return jsonObject;\n}\n\nfunction toJsonElement(value) {\n  if (value == null) {\n    return new JsonNull();\n  }\n\n  if (Array.isArray(value)) {\n    return toJsonArray(value);\n  }\n\n  return toJsonObject(value);\n}\n\nfunction wrap(content, request) {\n  var wrapper = {\n    content: content,\n    json: JSON.parse(content.toString()),\n    get: function get(property) {\n      return this.json[property];\n    },\n    set: function set(property, value) {\n      var json;\n\n      if (typeof property === 'string') {\n        json = {};\n        json[property] = value;\n      } else {\n        json = property;\n      }\n\n      for (var key in json) {\n        var item = json[key];\n\n        if (this.json[key] === item) {\n          continue;\n        }\n\n        if (this.json[key] !== undefined) {\n          if (this.content.has(key)) {\n            this.content.remove(key);\n          }\n\n          if (item === undefined) {\n            delete this.json[key];\n          }\n        }\n\n        if (item !== undefined) {\n          this.json[key] = item;\n\n          if (_typeof(item) === 'object') {\n            this.content.add(key, toJsonElement(item));\n          } else {\n            this.content.addProperty(key, item);\n          }\n        }\n      }\n\n      return this;\n    },\n    unset: function unset(key) {\n      return this.set(key);\n    }\n  };\n  var now = new Date().toISOString();\n\n  var userId = __context.get(Packages.ca.toronto.api.dataaccess.odata4.DataAccessContext.Constant.USER_ID);\n\n  if (userId) {\n    if (request.getMethod() === 'POST') {\n      this.set('CreatedBy', userId);\n      this.set('CreatedOn', now);\n    }\n\n    this.set('ModifiedBy', userId);\n  } else {\n    this.unset('ModifiedBy');\n  }\n\n  this.set('ModifiedOn', now);\n  return wrapper;\n}\n\nmodule.exports = {\n  toJsonArray: toJsonArray,\n  toJsonObject: toJsonObject,\n  toJsonElement: toJsonElement,\n  wrap: wrap\n};"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","JsonArray","Java","type","JsonObject","JsonNull","toJsonArray","value","jsonArray","index","length","item","add","toJsonElement","toJsonObject","key","jsonObject","Object","hasOwnProperty","call","addProperty","Array","isArray","wrap","content","request","wrapper","json","JSON","parse","toString","get","property","this","set","undefined","has","remove","unset","now","Date","toISOString","userId","__context","Packages","ca","toronto","api","dataaccess","odata4","DataAccessContext","Constant","USER_ID","getMethod","module","exports"],"mappings":"aAEA,SAASA,QAAQC,GAAkC,OAAOD,QAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAgBA,GAGzU,IAAIK,UAAYC,KAAKC,KAAK,6BACtBC,WAAaF,KAAKC,KAAK,8BACvBE,SAAWH,KAAKC,KAAK,4BAEzB,SAASG,YAAYC,GAGnB,IAFA,IAAIC,EAAY,IAAIP,UAEXQ,EAAQ,EAAGC,EAASH,EAAMG,OAAQD,EAAQC,EAAQD,IAAS,CAClE,IAAIE,EAAOJ,EAAME,GAEK,WAAlBd,QAAQgB,GACVH,EAAUI,IAAIC,cAAcF,IAE5BH,EAAUI,IAAID,GAIlB,OAAOH,EAGT,SAASM,aAAaP,GACpB,IAESQ,EAKHJ,EAPFK,EAAa,IAAIZ,WAErB,IAASW,KAAOR,EACTU,OAAOjB,UAAUkB,eAAeC,KAAKZ,EAAOQ,KAM3B,WAAlBpB,QAFAgB,EAAOJ,EAAMQ,IAGfC,EAAWJ,IAAIG,EAAKF,cAAcF,IAElCK,EAAWI,YAAYL,EAAKJ,IAIhC,OAAOK,EAGT,SAASH,cAAcN,GACrB,OAAa,MAATA,EACK,IAAIF,UAGTgB,MAAMC,QAAQf,GACTD,YAGFQ,cAHcP,GAMvB,SAASgB,KAAKC,EAASC,GACrB,IAAIC,EAAU,CACZF,QAASA,EACTG,KAAMC,KAAKC,MAAML,EAAQM,YACzBC,IAAK,SAAaC,GAChB,OAAOC,KAAKN,KAAKK,IAEnBE,IAAK,SAAaF,EAAUzB,GAC1B,IAAIoB,EASKZ,EAAT,IAASA,IAPe,iBAAbiB,GACTL,EAAO,IACFK,GAAYzB,EAEjBoB,EAAOK,EAGOL,EAAM,CACpB,IAAIhB,EAAOgB,EAAKZ,GAEZkB,KAAKN,KAAKZ,KAASJ,SAIAwB,IAAnBF,KAAKN,KAAKZ,KACRkB,KAAKT,QAAQY,IAAIrB,IACnBkB,KAAKT,QAAQa,OAAOtB,QAGToB,IAATxB,UACKsB,KAAKN,KAAKZ,SAIRoB,IAATxB,IAGoB,WAAlBhB,QAFJsC,KAAKN,KAAKZ,GAAOJ,GAGfsB,KAAKT,QAAQZ,IAAIG,EAAKF,cAAcF,IAEpCsB,KAAKT,QAAQJ,YAAYL,EAAKJ,KAKpC,OAAOsB,MAETK,MAAO,SAAevB,GACpB,OAAOkB,KAAKC,IAAInB,KAGhBwB,GAAM,IAAIC,MAAOC,cAEjBC,EAASC,UAAUZ,IAAIa,SAASC,GAAGC,QAAQC,IAAIC,WAAWC,OAAOC,kBAAkBC,SAASC,SAchG,OAZIV,GAC0B,SAAxBjB,EAAQ4B,cACVpB,KAAKC,IAAI,YAAaQ,GACtBT,KAAKC,IAAI,YAAaK,IAGxBN,KAAKC,IAAI,aAAcQ,IAEvBT,KAAKK,MAAM,cAGbL,KAAKC,IAAI,aAAcK,GAChBb,EAGT4B,OAAOC,QAAU,CACfjD,YAAaA,YACbQ,aAAcA,aACdD,cAAeA,cACfU,KAAMA"}
"use strict";var LoginModel=Model.extend({defaults:{app:"cot-app"},idAttribute:"sid",parse:function(t,e){return this.clear(),Model.prototype.parse.call(this,t,e)},login:function(){var i=this;return this.isNew()?new Promise(function(e,n){i.save(null,{headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"}}).then(function(t){i.setLastVerified(new Date),e(t)},function(t,e,i){n(i)})}):this.verify()},logout:function(){var e=this;return this.isNew()?Promise.resolve():new Promise(function(t){e.destroy({headers:{Authorization:e.attributes.userID}}).then(function(){e.reset(),e.setLastVerified(null),t()},function(){t()})})},verify:function(){var o=this;return this.isNew()?Promise.reject():new Promise(function(e,n){o.fetch({headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"}}).then(function(t){o.setLastVerified(new Date),e(t)},function(t,e,i){return o.logout().then(function(){n(i)})})})},lastVerified:null,preTimeout:null,preTimeoutDelay:177e4,timeout:null,timeoutDelay:18e5,setLastVerified:function(t){var e=this;this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),t?(this.lastVerified=t,this.preTimeout=setTimeout(function(){e.trigger("pretimeout")},this.preTimeoutDelay),this.timeout=setTimeout(function(){e.trigger("timeout")},this.timeoutDelay)):this.lastVerified=null}});
//# sourceMappingURL=login-model.min.js.map

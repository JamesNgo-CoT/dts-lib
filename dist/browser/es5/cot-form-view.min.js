"use strict";var CotFormView=View.extend({$liveRegion:null,initialize:function(){var e;this.$liveRegion=$(".js-aria-live.sr-only, .ui-helper-hidden-accessible").first();for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(e=View.prototype.initialize).call.apply(e,[this].concat(i))},formId:null,rootPath:null,sections:null,success:function(e){return e.preventDefault(),this.removeErrorMessage(),this.trigger("success"),!1},title:null,definition:function(){var t=this,e=_.result(this,"formId"),i=_.result(this,"id");return{id:e||(i?"".concat(i,"Form"):null),rootPath:_.result(this,"rootPath"),sections:_.result(this,"sections"),success:function(e){return t.success(e)},title:_.result(this,"title"),useBinding:!0}},$alert:null,$form:null,footer:'<p><button class="btn btn-primary btn-lg">Submit</button></p>',formValidator:null,postRender:null,preRender:null,render:function(){function e(e){if(C.sections)for(var h=C.sections,t=0,f=h.length;t<f;t++){var i=h[t];if(e("section",i),i.rows)for(var u=i.rows,r=0,c=u.length;r<c;r++){var s=u[r];if(e("row",s),s.fields)for(var m=s.fields,l=0,p=m.length;l<p;l++)e("field",m[l]);else if(s.grid){var n=s.grid;if(e("grid",n),n.fields)for(var v=n.fields,o=0,b=v.length;o<b;o++)e("gridField",v[o])}else if(s.repeatControl){n=s.repeatControl;if(e("repeatControl",n),n.rows)for(var $=n.rows,a=0,g=$.length;a<g;a++){var d=$[a];if(e("repeatControlRow",d),d.fields)for(var R=d.fields,F=0,w=R.length;F<w;F++)e("repeatControlField",R[F])}}}}}var o=this,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).setFocus,t=void 0!==t&&t,C=(this.$el.empty(),Object.assign({},_.result(this,"definition",{}))),i=(this.preRender&&this.preRender.call(this,C,this),e(function(e,t){switch(e){case"field":case"gridField":case"repeatControlField":for(var i in t)"onclick"!==i&&"preRender"!==i&&"postRender"!==i&&(t[i]=_.result(t,i));if(o.model&&t.bindTo&&t.choices&&o.model.has(t.bindTo))for(var r=Array.isArray(o.model.attributes[t.bindTo])?o.model.attributes[t.bindTo]:[o.model.attributes[t.bindTo]],s=t.choices.map(function(e){var t=e.text;return e.value||t}),l=r.length-1;0<=l;l--){var n=r[l];-1===s.indexOf(n)&&t.choices.unshift({text:n})}}t.preRender&&t.preRender.call(o,t,o)}),new CotForm(C)),i=(i.render({target:this.$el}),this.model&&i.setModel(this.model),this.$form=$("form",this.$el).first(),this.formValidator=this.$form.data("formValidation"),this.$alert=$('<div role="alert"></div>'),$(".panel:first",this.$form).before(this.$alert),this.$form.append(_.result(this,"footer","")),e(function(e,t){t.postRender&&t.postRender.call(o,t,o)}),this.postRender&&this.postRender.call(this,C,this),$("h2",this.$form).attr("tabindex","-1").first());return t&&i.focus(),this},disabledElements:null,disableFields:function(){return this.$disabledElements=this.$form.find("button, input, select, textarea").filter(":enabled:visible").prop("disabled",!0),this.$liveRegion.html("Form fields are disabled"),this},enableFields:function(){return this.$disabledElements&&(this.$disabledElements.prop("disabled",!1),this.$disabledElements=null),this.$liveRegion.html("Form fields are enabled"),this},setErrorMessage:function(e){var t=this;return setTimeout(function(){t.formValidator.resetForm(!1)},0),this.$alert.addClass("alert alert-danger"),this.$alert.html(e),this},removeErrorMessage:function(){return this.$alert.removeClass("alert alert-danger"),this.$alert.html(""),this}});
//# sourceMappingURL=cot-form-view.min.js.map

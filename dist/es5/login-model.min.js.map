{"version":3,"file":"login-model.min.js","sources":["login-model.min.js"],"sourcesContent":["\"use strict\";\n\n/* global $ */\n\n/* global Model */\nvar LoginModel = Model.extend({\n\tdefaults: {\n\t\tapp: 'cot-app'\n\t},\n\tidAttribute: 'sid',\n\tparse: function parse(response, options) {\n\t\tthis.clear();\n\t\treturn Model.prototype.parse.call(this, response, options);\n\t},\n\tlogin: function login() {\n\t\tif (this.isNew()) {\n\t\t\treturn this.save(null, {\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json; charset=utf-8',\n\t\t\t\t\t'Content-Type': 'application/json; charset=utf-8'\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn this.verify();\n\t\t}\n\t},\n\tlogout: function logout() {\n\t\tvar _this = this;\n\n\t\tif (!this.isNew()) {\n\t\t\tvar userId = this.get('userID');\n\t\t\treturn this.destroy({\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: userId\n\t\t\t\t}\n\t\t\t}).then(function() {\n\t\t\t\t_this.reset();\n\t\t\t}).always(function() {\n\t\t\t\treturn $.Deferred().resolve().promise();\n\t\t\t});\n\t\t} else {\n\t\t\treturn $.Deferred().resolve().promise();\n\t\t}\n\t},\n\tverify: function verify() {\n\t\tvar _this2 = this;\n\n\t\tif (this.isNew()) {\n\t\t\treturn $.Deferred().reject().promise();\n\t\t}\n\n\t\treturn this.fetch({\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json; charset=utf-8',\n\t\t\t\t'Content-Type': 'application/json; charset=utf-8'\n\t\t\t}\n\t\t})[\"catch\"](function() {\n\t\t\treturn _this2.logout().always(function() {\n\t\t\t\treturn $.Deferred().reject().promise();\n\t\t\t});\n\t\t});\n\t}\n});\n/* exported LoginModel */\n"],"names":["LoginModel","Model","extend","defaults","app","idAttribute","parse","response","options","this","clear","prototype","call","login","isNew","save","headers","Accept","Content-Type","verify","logout","userId","_this","$","Deferred","resolve","promise","get","destroy","Authorization","then","reset","always","_this2","reject","fetch"],"mappings":"aAKA,IAAIA,WAAaC,MAAMC,OAAO,CAC7BC,SAAU,CACTC,IAAK,WAENC,YAAa,MACbC,MAAO,SAAeC,EAAUC,GAE/B,OADAC,KAAKC,QACET,MAAMU,UAAUL,MAAMM,KAAKH,KAAMF,EAAUC,IAEnDK,MAAO,WACN,OAAIJ,KAAKK,QACDL,KAAKM,KAAK,KAAM,CACtBC,QAAS,CACRC,OAAU,kCACVC,eAAgB,qCAIXT,KAAKU,UAGdC,OAAQ,WACP,IAGKC,EAHDC,EAAQb,KAEZ,OAAKA,KAAKK,QAYFS,EAAEC,WAAWC,UAAUC,WAX1BL,EAASZ,KAAKkB,IAAI,UACflB,KAAKmB,QAAQ,CACnBZ,QAAS,CACRa,cAAeR,KAEdS,KAAK,WACPR,EAAMS,UACJC,OAAO,WACT,OAAOT,EAAEC,WAAWC,UAAUC,cAMjCP,OAAQ,WACP,IAAIc,EAASxB,KAEb,OAAIA,KAAKK,QACDS,EAAEC,WAAWU,SAASR,UAGvBjB,KAAK0B,MAAM,CACjBnB,QAAS,CACRC,OAAU,kCACVC,eAAgB,qCAER,MAAE,WACX,OAAOe,EAAOb,SAASY,OAAO,WAC7B,OAAOT,EAAEC,WAAWU,SAASR"}